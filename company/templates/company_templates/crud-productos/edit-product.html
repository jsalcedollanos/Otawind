{% extends 'company_templates/layouts/layout.html' %}
{% load static %}
{% block title %}
    Editar producto
{% endblock title %}

{% block content %}
    <div class="content-producto">
        {% include 'company_templates/layouts/layout-dashboard.html' %}
        <div class="content-producto-general">
            <div class="content-form">
                <h1>Editar producto</h1>
                {% include "company_templates/layouts/form.html" %}
            </div>
        </div> 
    </div> 
{% endblock content %}

{% block script %}
<script src="{% static '../static/js/jquery-3.6.4.js' %}"></script>
<script>
    $(document).ready(()=>{
        $('#id_catalog').val('{{producto.catalog.id}}')
        $('#id_profile').val('{{producto.profile.id}}')
        $('#id_name_product').val('{{producto.name_product}}')
        $('#id_quantities').val('{{producto.quantities}}')
        $('#id_description').val('{{producto.description}}')
        $('#id_status').val('{{producto.status}}')
        $('#id_brand').val('{{producto.brand}}')
        $('#id_valoration').val('{{producto.valoration}}')
        $('#id_price').val('{{producto.price}}')
        $('#id_price_promo').val('{{producto.price_promo}}')
        $('#id_color').val('{{producto.color}}')
        setTimeout(function() {
            $("#flash-success").fadeOut(1500);
            $("#flash-error").fadeOut(1500);
        },3000);

    })

    $('#btn-cancelar').click(function(){
        $('.modal-form').removeClass("modal--show");
    });


    // Solo imagenes
    $('input[type=file]').attr('accept','image/.jpg, .png, .jpeg, .webp');

    //Editar recuadro de imagen para Editar
    $('#photo_product1').html('<input type="file" name="photo_product1" accept="image/.jpg, .png, .jpeg, .webp" id="id_photo_product1"><div id="msg-file-11" style="position:relative; bottom:70px; font-size:12px; text-align:center;"><p>Puedes editar tu imagen aqui</p><p>{{producto.photo_product1}}</p></div>')
    $('#photo_product2').html('<input type="file" name="photo_product2" accept="image/.jpg, .png, .jpeg, .webp" id="id_photo_product2"><div id="msg-file-12" style="position:relative; bottom:70px; font-size:12px; text-align:center;"><p>Puedes editar tu imagen aqui</p><p>{{producto.photo_product2}}</p></div>')
    $('#photo_product3').html('<input type="file" name="photo_product3" accept="image/.jpg, .png, .jpeg, .webp" id="id_photo_product3"><div id="msg-file-13" style="position:relative; bottom:70px; font-size:12px; text-align:center;"><p>Puedes editar tu imagen aqui</p><p>{{producto.photo_product3}}</p></div>')
    $('#photo_product4').html('<input type="file" name="photo_product4" accept="image/.jpg, .png, .jpeg, .webp" id="id_photo_product4"><div id="msg-file-14" style="position:relative; bottom:70px; font-size:12px; text-align:center;"><p>Puedes editar tu imagen aqui</p><p>{{producto.photo_product4}}</p></div>')

    // Validacion de INPUT file
    $('#id_photo_product1').on("change", function(){
        if($('id_photo_product1').value != ""){
            const archivo = this.value.replace('C:\\fakepath\\','')
            $('#msg-file-11').html('<div style="position:relative; bottom:43px; font-size:12px; text-align:center;"><input type="file" name="photo_product1" accept="image/.jpg, .png, .jpeg, .webp" id="id_photo_product1"><p>Se a cargado la nueva imagen</p><p style="display:relative; top:2px;" id="arc-11"></p></div>')  
            $('#arc-11').html(archivo)  
        } 
    })

    $('#id_photo_product2').on("change", function(){
        if($('id_photo_product2').value != ""){
            const archivo = this.value.replace('C:\\fakepath\\','')
            $('#msg-file-12').html('<div style="position:relative; bottom:43px; font-size:12px; text-align:center;"><input type="file" name="photo_product2" accept="image/.jpg, .png, .jpeg, .webp" id="id_photo_product2"><p>Se a cargado la nueva imagen</p><p style="display:relative; top:2px;" id="arc-12"></p></div>')  
            $('#arc-12').html(archivo)  
        } 
    })

    $('#id_photo_product3').on("change", function(){
        if($('id_photo_product3').value != ""){
            const archivo = this.value.replace('C:\\fakepath\\','')
            $('#msg-file-13').html('<div style="position:relative; bottom:43px; font-size:12px; text-align:center;"><input type="file" name="photo_product3" accept="image/.jpg, .png, .jpeg, .webp" id="id_photo_product3"><p>Se a cargado la nueva imagen</p><p style="display:relative; top:2px;" id="arc-13"></p></div>')  
            $('#arc-13').html(archivo)  
        } 
    })

    $('#id_photo_product4').on("change", function(){
        if($('id_photo_product4').value != ""){
            const archivo = this.value.replace('C:\\fakepath\\','')
            $('#msg-file-14').html('<div style="position:relative; bottom:43px; font-size:12px; text-align:center;"><input type="file" name="photo_product4" accept="image/.jpg, .png, .jpeg, .webp" id="id_photo_product4"><p>Se a cargado la nueva imagen</p><p style="display:relative; top:2px;" id="arc-14"></p></div>')  
            $('#arc-14').html(archivo)  
        } 
    })
</script>
{% endblock script %}